---
id: what-is-k3s
title: k3s란?
date: 2022-09-03
summary: k3s를 도입하게 된 이유를 특징들을 통해 알아보자
topic: k3s
published: false
tags:
  - kubernetes
  - k3s
---
## k3s?
k3s는 kubernetes Web UI로 유명안 Rancher에서 만든 경량화 k8s이다. 경량화한 부분들을 보면 우선 etcd를 기본으로 사용하지 않는다. 물론 옵션으로 etcd를 사용할 수 있고 postgres나 mysql, mariadb 등 다른 옵션도 있지만 기본은 sqlite를 사용한다. 그래서 고가용성을 고려한 구성을 하기안 안맞지만 개인적으로 개발클러스터로 테스팅하는 용도로는 더 적절하다. 또 Docker가 올라가지 않고 containerd만 올라가는데 이건 최근 k8s 자체도 그렇지만 어쨌든 경량화의 한 부분이라 할 수 있다.

## k3s 선택 이유
전에 포스팅한 글을 보면 알 수 있지만 원래는 AWS에 terraform + kube-spray를 사용해 클러스터를 구성하려고 했다. 그런데 집에 노는 PC도 있고 해서 그냥 서버로 이 PC를 사용하기로 결정했고 kube-spray로 싱글노드 클러스터를 구성 해봤지만 뭔가 용도에 맞지 않는 느낌이었다. 네트워크 구조상 이 PC는 공유기에 물릴 수 없어서 서브넷 구성이 힘들어서 IP가 언제든 바뀔 수 있었고 기타등등 문제가 많아서 애초에 싱글노드로도 구성할 목적으로 만들어진 솔루션을 찾으니 k3s가 가장 적절해 보였다.

## 다른 경량화 k8s와의 비교
다른 경량화 k8s로는 microk8s와 minikube가 있었다.

- microk8s: canonical에서 만든 경량화 k8s인데 경량화된 k8s 중에는 제일 k8s에 가까운 형태를 하고 있었지만 아직 사용자가 너무 적은지 관련 자료를 찾기가 힘들어서 당장은 사용하지 않았다. k3s보다 많은 부분을 지원해서 추후에 사용자가 많아지면 microk8s로 넘어갈 수도 있을 것 같다.
- minikube: minikube는 사실 애초에 후보에 넣을 수가 없었는데 공식적으로 production용으로 사용하기를 권장하지 않기도 하고 다중에 테스트를 위해 클러스터를 구성할 때도 어려운 점들이 보이는 것 같아서 고려하지 않았다.
